<?xml version="1.0" encoding="UTF-8"?>
<!--
  - Application context definition for the QAT business area data access layer.
  -->
<beans xmlns="http://www.springframework.org/schema/beans"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:util="http://www.springframework.org/schema/util"
		xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd ">

	<!-- Setup for mybatis Database Layer -->
	<bean id="pgsi-payer-sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
		<property name="configLocation" value="classpath:com/prosperitasglobal/sendsolv/payer/dac/mybatis/map/sendsolv-payer-mybatis-config.xml" />
		<property name="dataSource" ref="pgsiDataSource" />
	   	<property name="databaseIdProvider" ref="databaseIdProvider"/>
	</bean>

	<!-- ========================= DAC DEFINITIONS================================= -->
	<bean id="payerCountryDACTarget" class="com.prosperitasglobal.sendsolv.payer.dac.mybatis.PayerCountryDACImpl">
		<property name="sqlSessionFactory" ref="pgsi-payer-sqlSessionFactory" />
		<property name="payerStateProvinceRegionDAC" ref="payerStateProvinceRegionDACTarget"/>
		<property name="payerCountryInquiryValidSortFields" ref="payerCountryInquiryValidSortFields"/>
	</bean>

	<bean id="payerStateProvinceRegionDACTarget" class="com.prosperitasglobal.sendsolv.payer.dac.mybatis.PayerStateProvinceRegionDACImpl">
		<property name="sqlSessionFactory" ref="pgsi-payer-sqlSessionFactory" />
		<property name="payerCityDAC" ref="payerCityDACTarget"/>
		<property name="payerStateProvinceRegionInquiryValidSortFields" ref="payerStateProvinceRegionInquiryValidSortFields"/>
	</bean>

	<bean id="payerCityDACTarget" class="com.prosperitasglobal.sendsolv.payer.dac.mybatis.PayerCityDACImpl">
		<property name="sqlSessionFactory" ref="pgsi-payer-sqlSessionFactory" />
		<property name="payerAddressDAC" ref="payerAddressDACTarget"/>
		<property name="payerZipcodeDAC" ref="payerZipcodeDACTarget"/>
		<property name="payerCityInquiryValidSortFields" ref="payerCityInquiryValidSortFields"/>
	</bean>

	<bean id="payerZipcodeDACTarget" class="com.prosperitasglobal.sendsolv.payer.dac.mybatis.PayerZipcodeDACImpl">
		<property name="sqlSessionFactory" ref="pgsi-payer-sqlSessionFactory" />
		<property name="payerAddressDAC" ref="payerAddressDACTarget"/>
	</bean>

	<bean id="payerAddressDACTarget" class="com.prosperitasglobal.sendsolv.payer.dac.mybatis.PayerAddressDACImpl">
		<property name="sqlSessionFactory" ref="pgsi-payer-sqlSessionFactory" />
		<property name="payerBranchDAC" ref="payerBranchDACTarget"/>
	</bean>

	<bean id="payerBranchDACTarget" class="com.prosperitasglobal.sendsolv.payer.dac.mybatis.PayerBranchDACImpl">
		<property name="sqlSessionFactory" ref="pgsi-payer-sqlSessionFactory" />
	</bean>

	<!-- ========================= DAC DEFINITIONS FOR OTHER DEPENDENCIES ========================= -->

	<bean id="payerDACTarget" class="com.prosperitasglobal.sendsolv.dac.mybatis.PayerDACImpl">
		<property name="sqlSessionFactory" ref="pgsi-payer-sqlSessionFactory" />
		<property name="currencyPurchaseDAC" ref="currencyPurchaseDACTarget"/>
		<property name="dailyCurrencyRateDAC" ref="dailyCurrencyRateDACTarget"/>
		<property name="payerInquiryValidSortFields" ref="payerInquiryValidSortFields"/>
	</bean>

	<bean id="currencyPurchaseDACTarget" class="com.prosperitasglobal.sendsolv.dac.mybatis.CurrencyPurchaseDACImpl">
		<property name="sqlSessionFactory" ref="pgsi-payer-sqlSessionFactory" />
	</bean>

	<bean id="dailyCurrencyRateDACTarget" class="com.prosperitasglobal.sendsolv.dac.mybatis.DailyCurrencyRateDACImpl">
		<property name="sqlSessionFactory" ref="pgsi-payer-sqlSessionFactory" />
	</bean>

	<!-- ========================= Valid Sort Field DEFINITIONS FOR OTHER DEPENDENCIES ================================= -->

	<util:map id="payerInquiryValidSortFields">
		<entry key="name" value="payer_name"/>
		<entry key="country" value="FK_country_code"/>
	</util:map>

	<util:map id="payerCountryInquiryValidSortFields">
		<entry key="code" value="pc.country_code"/>
		<entry key="name" value="c.name"/>
	</util:map>

	<util:map id="payerStateProvinceRegionInquiryValidSortFields">
		<entry key="code" value="spr.code"/>
		<entry key="name" value="spr.name"/>
	</util:map>

	<util:map id="payerCityInquiryValidSortFields">
		<entry key="id" value="city_id"/>
		<entry key="name" value="name"/>
	</util:map>

</beans>
