<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="DailyCurrencyRateDetailMap">

	<!-- <cache type="org.mybatis.caches.ehcache.LoggingEhcache"/>
	<cache type="org.mybatis.caches.ehcache.EhcacheCache"/>  -->

  	<!-- Result maps describe the mapping between the columns returned
       from a query, and the class properties.  A result map isn't
       necessary if the columns (or aliases) match to the properties
       exactly. -->

	<resultMap id="dailyCurrencyRateDetailResult" type="DailyCurrencyRateDetail">
		<result property="id"	               column="daily_currency_rate_detail_id"/>
		<result property="dailyCurrencyRateId" column="FK_daily_currency_rate_id"/>
		<result property="exchangeRate"        column="exchange_rate_value"/>
  		<result property="createUser"          column="create_user"/>
		<result property="createDateUTC"       column="create_date"/>
	</resultMap>

    <!--************************************************************************** -->
	<!-- SQL fragments allow "parts" of SQL to be re-used in other SQL statements. -->
	<!--************************************************************************** -->

	<sql id="allDailyCurrencyRateDetailColumnsExceptKey">
		FK_daily_currency_rate_id,
		exchange_rate_value,
		create_user,
		create_date
	</sql>

	<sql id="allDailyCurrencyRateDetailColumns">
		daily_currency_rate_detail_id,
		<include refid="DailyCurrencyRateDetailMap.allDailyCurrencyRateDetailColumnsExceptKey"/>
	</sql>

	<sql id="allDailyCurrencyRateDetailValuesExceptKey">
		#{dailyCurrencyRateId},
		#{exchangeRate},
		#{createUser},
		#{createDateUTC}
	</sql>

	<sql id="allDailyCurrencyRateDetailValues">
		#{id},
		<include refid="DailyCurrencyRateDetailMap.allDailyCurrencyRateDetailValuesExceptKey"/>
	</sql>

    <!--**************************************************************************-->
    <!--**********************SQL Insert Statements.******************************-->
    <!--**************************************************************************-->

   	<insert id="insertDailyCurrencyRateDetail" parameterType="DailyCurrencyRateDetail" useGeneratedKeys="true" keyProperty="id">
	  	INSERT INTO daily_currency_rate_detail (
			<include refid="DailyCurrencyRateDetailMap.allDailyCurrencyRateDetailColumnsExceptKey" />
	      )
	    VALUES (<include refid="DailyCurrencyRateDetailMap.allDailyCurrencyRateDetailValuesExceptKey" /> )
  	</insert>

    <!--**************************************************************************-->
    <!--*************************SQL Update Statements.***************************-->
    <!--**************************************************************************-->

  	<update id="updateDailyCurrencyRateDetail" parameterType="DailyCurrencyRateDetail">
    	UPDATE daily_currency_rate_detail
    	<set>
    		<if test="dailyCurrencyRateId != null"> FK_daily_currency_rate_id = #{dailyCurrencyRateId}, </if>
    		<if test="exchangeRate != null"> exchange_rate_value = #{exchangeRate}, </if>
		</set>
    	WHERE
     		daily_currency_rate_detail_id = #{id}
  	</update>

	<!--**************************************************************************-->
    <!--***********************SQL Delete Statements.*****************************-->
    <!--**************************************************************************-->

  	<delete id="deleteDailyCurrencyRateDetail" parameterType="DailyCurrencyRateDetail">
  		DELETE FROM daily_currency_rate_detail
  		WHERE
  			daily_currency_rate_detail_id = #{id}
	</delete>

	<!--**************************************************************************-->
    <!--*************************SQL Fetch Statements.****************************-->
    <!--**************************************************************************-->

    <select id="fetchDailyCurrencyRateDetailById" parameterType="int" resultMap="dailyCurrencyRateDetailResult">
		SELECT
			<include refid="DailyCurrencyRateDetailMap.allDailyCurrencyRateDetailColumns"/>
		FROM daily_currency_rate_detail
		WHERE daily_currency_rate_detail_id = #{id}
  	</select>

	<select id="fetchDailyCurrencyRateDetailByDailyCurrencyRateId" parameterType="int" resultMap="dailyCurrencyRateDetailResult">
		SELECT
			<include refid="DailyCurrencyRateDetailMap.allDailyCurrencyRateDetailColumns"/>
		FROM daily_currency_rate_detail
		WHERE FK_daily_currency_rate_id = #{id}
		ORDER BY create_date DESC
  	</select>

</mapper>