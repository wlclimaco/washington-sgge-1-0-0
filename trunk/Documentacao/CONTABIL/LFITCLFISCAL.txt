CREATE TABLE LFITCLFISCAL (
    CODEMP            INTEGER NOT NULL,
    CODFILIAL         INTEGER NOT NULL,
    CODFISC           CHAR(13) NOT NULL,
    CODITFISC         INTEGER NOT NULL,
    ORIGFISC          CHAR(1) NOT NULL,
    CODEMPTT          INTEGER NOT NULL,
    CODFILIALTT       INTEGER NOT NULL,
    TIPOFISC          CHAR(2) NOT NULL,
    TPREDICMSFISC     CHAR(1) DEFAULT 'B' NOT NULL,
    REDFISC           NUMERIC(9,2),
    CODTRATTRIB       CHAR(2) NOT NULL,
    NOUFITFISC        CHAR(1) CHARACTER SET WIN1252 DEFAULT 'N' NOT NULL,
    CODEMPFC          INTEGER,
    CODFILIALFC       INTEGER,
    CODFISCCLI        INTEGER,
    ALIQFISC          NUMERIC(9,2),
    ALIQFISCINTRA     NUMERIC(9,2),
    ALIQLFISC         NUMERIC(9,2),
    ALIQIPIFISC       NUMERIC(6,2) DEFAULT 0 NOT NULL,
    ALIQPISFISC       NUMERIC(6,2) DEFAULT 0 NOT NULL,
    ALIQCOFINSFISC    NUMERIC(6,2) DEFAULT 0 NOT NULL,
    ALIQCSOCIALFISC   NUMERIC(6,2) DEFAULT 0 NOT NULL,
    ALIQIRFISC        NUMERIC(6,2) DEFAULT 0 NOT NULL,
    ALIQFUNRURALFISC  NUMERIC(6,2) DEFAULT 0 NOT NULL,
    ALIQIIFISC        NUMERIC(9,2) DEFAULT 0 NOT NULL,
    CODEMPME          INTEGER,
    CODFILIALME       SMALLINT,
    CODMENS           INTEGER,
    CODEMPTM          INTEGER,
    CODFILIALTM       SMALLINT,
    CODTIPOMOV        INTEGER,
    TIPOST            CHAR(2) DEFAULT 'SI',
    MARGEMVLAGR       NUMERICDN /* NUMERICDN = NUMERIC(15,5) */,
    GERALFISC         CHAR(1) DEFAULT 'N' NOT NULL,
    CODEMPSP          INTEGER,
    CODFILIALSP       SMALLINT,
    CODSITTRIBPIS     CHAR(2),
    IMPSITTRIBPIS     CHAR(2),
    CODEMPSC          INTEGER,
    CODFILIALSC       SMALLINT,
    CODSITTRIBCOF     CHAR(2),
    IMPSITTRIBCOF     CHAR(2),
    CODEMPSI          INTEGER,
    CODFILIALSI       SMALLINT,
    CODSITTRIBIPI     CHAR(2),
    IMPSITTRIBIPI     CHAR(2),
    TPCALCIPI         CHAR(1),
    VLRIPIUNIDTRIB    NUMERICDN /* NUMERICDN = NUMERIC(15,5) */,
    MODBCICMS         SMALLINT DEFAULT 3 NOT NULL,
    MODBCICMSST       SMALLINT DEFAULT 4 NOT NULL,
    CODPAIS           SMALLINT,
    SIGLAUF           CHAR(2),
    VLRPISUNIDTRIB    NUMERICDN /* NUMERICDN = NUMERIC(15,5) */,
    VLRCOFUNIDTRIB    NUMERICDN /* NUMERICDN = NUMERIC(15,5) */,
    TIPOUSOITFISC     CHAR(2) DEFAULT 'VD' NOT NULL,
    REDBASEST         CHAR(1) DEFAULT 'S',
    REDBASEFRETE      CHAR(1) DEFAULT 'N',
    CODEMPRA          INTEGER,
    CODFILIALRA       SMALLINT,
    CODREGRA          CHAR(4),
    CODEMPIS          INTEGER,
    CODFILIALIS       SMALLINT,
    CODSITTRIBISS     CHAR(2),
    IMPSITTRIBISS     CHAR(2),
    ALIQISSFISC       NUMERIC(6,2),
    RETENSAOISS       CHAR(1),
    INDAPURIPI        CHAR(1),
    CODEMPCN          INTEGER,
    CODFILIALCN       SMALLINT,
    CSOSN             CHAR(4),
    ALIQICMSIMP       NUMERICDN /* NUMERICDN = NUMERIC(15,5) */,
    PERCCREDPRESIMP   NUMERICDN DEFAULT 100.00 NOT NULL /* NUMERICDN = NUMERIC(15,5) */,
    ADICIPIBASEICMS   CHAR(1) DEFAULT 'N' NOT NULL,
    ADICICMSTOTNOTA   CHAR(1) DEFAULT 'N' NOT NULL,
    CODEMPCC          INTEGER,
    CODFILIALCC       SMALLINT,
    CODCALC           INTEGER,
    ALIQICMSSTCM      NUMERIC(9,2) DEFAULT 0,
    CALCSTCM          CHAR(1) DEFAULT 'N',
    DTINS             DATE DEFAULT 'now' NOT NULL,
    HINS              TIME DEFAULT 'now' NOT NULL,
    IDUSUINS          CHAR(8) DEFAULT USER NOT NULL,
    DTALT             DATE DEFAULT 'now',
    HALT              TIME DEFAULT 'now',
    IDUSUALT          CHAR(8) DEFAULT USER
);




/******************************************************************************/
/****                             Primary Keys                             ****/
/******************************************************************************/

ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLFISCAL PRIMARY KEY (CODEMP, CODFILIAL, CODFISC, CODITFISC);


/******************************************************************************/
/****                             Foreign Keys                             ****/
/******************************************************************************/

ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLFISCALFKCSOSN FOREIGN KEY (CSOSN, CODFILIALCN, CODEMPCN) REFERENCES LFCSOSN (CSOSN, CODFILIAL, CODEMP);
ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLFISCALFKEQTIPOMOV FOREIGN KEY (CODTIPOMOV, CODFILIALTM, CODEMPTM) REFERENCES EQTIPOMOV (CODTIPOMOV, CODFILIAL, CODEMP);
ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLFISCALFKLFCL FOREIGN KEY (CODFISC, CODFILIAL, CODEMP) REFERENCES LFCLFISCAL (CODFISC, CODFILIAL, CODEMP);
ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLFISCALFKLFME FOREIGN KEY (CODMENS, CODFILIALME, CODEMPME) REFERENCES LFMENSAGEM (CODMENS, CODFILIAL, CODEMP);
ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLFISCALFKLFREGRAFISCAL FOREIGN KEY (CODREGRA, CODFILIALRA, CODEMPRA) REFERENCES LFREGRAFISCAL (CODREGRA, CODFILIAL, CODEMP);
ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLFISCALFKLFTI FOREIGN KEY (CODFISCCLI, CODFILIALFC, CODEMPFC) REFERENCES LFTIPOFISCCLI (CODFISCCLI, CODFILIAL, CODEMP);
ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLFISCALFKLFTR FOREIGN KEY (CODTRATTRIB, CODFILIALTT, CODEMPTT) REFERENCES LFTRATTRIB (CODTRATTRIB, CODFILIAL, CODEMP);
ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLFISCALFKSGUF FOREIGN KEY (SIGLAUF, CODPAIS) REFERENCES SGUF (SIGLAUF, CODPAIS);
ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLSFISCALFKLFCALCCUSTO FOREIGN KEY (CODCALC, CODFILIALCC, CODEMPCC) REFERENCES LFCALCCUSTO (CODCALC, CODFILIAL, CODEMP);
ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLSFISCALFKLFSITTRIBCOF FOREIGN KEY (CODSITTRIBCOF, IMPSITTRIBCOF, CODFILIALSC, CODEMPSC) REFERENCES LFSITTRIB (CODSITTRIB, IMPSITTRIB, CODFILIAL, CODEMP);
ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLSFISCALFKLFSITTRIBIPI FOREIGN KEY (CODSITTRIBIPI, IMPSITTRIBIPI, CODFILIALSI, CODEMPSI) REFERENCES LFSITTRIB (CODSITTRIB, IMPSITTRIB, CODFILIAL, CODEMP);
ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLSFISCALFKLFSITTRIBISS FOREIGN KEY (CODSITTRIBISS, IMPSITTRIBISS, CODFILIALIS, CODEMPIS) REFERENCES LFSITTRIB (CODSITTRIB, IMPSITTRIB, CODFILIAL, CODEMP);
ALTER TABLE LFITCLFISCAL ADD CONSTRAINT LFITCLSFISCALFKLFSITTRIBPIS FOREIGN KEY (CODSITTRIBPIS, IMPSITTRIBPIS, CODFILIALSP, CODEMPSP) REFERENCES LFSITTRIB (CODSITTRIB, IMPSITTRIB, CODFILIAL, CODEMP);

