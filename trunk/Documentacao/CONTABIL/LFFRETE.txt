CREATE TABLE LFFRETE (
    CODEMP            INTEGER NOT NULL,
    CODFILIAL         SMALLINT NOT NULL,
    CODFRETE          INTEGER NOT NULL,
    DOCFRETE          VARCHAR(13),
    CODEMPTN          INTEGER NOT NULL,
    CODFILIALTN       SMALLINT NOT NULL,
    CODTRAN           INTEGER NOT NULL,
    CODEMPTM          INTEGER NOT NULL,
    CODFILIALTM       SMALLINT NOT NULL,
    CODTIPOMOV        INTEGER NOT NULL,
    CODEMPNT          INTEGER,
    CODFILIALNT       SMALLINT,
    CODNAT            CHAR(4),
    TIPOFRETE         CHAR(1) NOT NULL,
    TIPOPGTO          CHAR(1) NOT NULL,
    CODEMPRE          INTEGER NOT NULL,
    CODFILIALRE       SMALLINT NOT NULL,
    CODREMET          INTEGER NOT NULL,
    CODEMPDE          INTEGER NOT NULL,
    CODFILIALDE       SMALLINT NOT NULL,
    CODDESTINAT       INTEGER NOT NULL,
    DTEMITFRETE       DATE NOT NULL,
    DTPAGFRETE        DATE,
    QTDFRETE          NUMERICDN NOT NULL /* NUMERICDN = NUMERIC(15,5) */,
    VLRMERCADORIA     NUMERICDN NOT NULL /* NUMERICDN = NUMERIC(15,5) */,
    VLRFRETE          NUMERICDN NOT NULL /* NUMERICDN = NUMERIC(15,5) */,
    VLRFRETENOTA      NUMERICDN /* NUMERICDN = NUMERIC(15,5) */,
    PESOBRUTO         NUMERICDN NOT NULL /* NUMERICDN = NUMERIC(15,5) */,
    PESOLIQUIDO       NUMERICDN NOT NULL /* NUMERICDN = NUMERIC(15,5) */,
    ALIQICMSFRETE     NUMERICDN DEFAULT 0 NOT NULL /* NUMERICDN = NUMERIC(15,5) */,
    VLRICMSFRETE      NUMERICDN DEFAULT 0 NOT NULL /* NUMERICDN = NUMERIC(15,5) */,
    VLRBASEICMSFRETE  NUMERICDN DEFAULT 0 NOT NULL /* NUMERICDN = NUMERIC(15,5) */,
    CODEMPPA          INTEGER,
    CODFILIALPA       SMALLINT,
    CODPAG            INTEGER,
    SERIE             CHAR(4),
    CODEMPRM          INTEGER,
    CODFILIALRM       SMALLINT,
    TICKET            INTEGER,
    CHAVECTE          VARCHAR(44),
    CODEMPTT          INTEGER,
    CODFILIALTT       SMALLINT,
    CODTRATTRIB       CHAR(2),
    CODEMPEX          INTEGER,
    CODFILIALEX       SMALLINT,
    TICKETEX          INTEGER,
    DTINS             DATE DEFAULT 'now' NOT NULL,
    HINS              TIME DEFAULT 'now' NOT NULL,
    IDUSUINS          CHAR(8) DEFAULT USER NOT NULL,
    DTALT             DATE DEFAULT 'now',
    HALT              TIME DEFAULT 'now',
    IDUSUALT          CHAR(8) DEFAULT USER
);




/******************************************************************************/
/****                             Primary Keys                             ****/
/******************************************************************************/

ALTER TABLE LFFRETE ADD CONSTRAINT VDFRETEPK PRIMARY KEY (CODFRETE, CODFILIAL, CODEMP);


/******************************************************************************/
/****                             Foreign Keys                             ****/
/******************************************************************************/

ALTER TABLE LFFRETE ADD CONSTRAINT LFFRETEFKEQEXPEDICAO FOREIGN KEY (TICKETEX, CODFILIALEX, CODEMPEX) REFERENCES EQEXPEDICAO (TICKET, CODFILIAL, CODEMP);
ALTER TABLE LFFRETE ADD CONSTRAINT LFFRETEFKEQRECMERC FOREIGN KEY (TICKET, CODFILIALRM, CODEMPRM) REFERENCES EQRECMERC (TICKET, CODFILIAL, CODEMP);
ALTER TABLE LFFRETE ADD CONSTRAINT LFFRETEFKEQTIPOMOV FOREIGN KEY (CODTIPOMOV, CODFILIALTM, CODEMPTM) REFERENCES EQTIPOMOV (CODTIPOMOV, CODFILIAL, CODEMP);
ALTER TABLE LFFRETE ADD CONSTRAINT LFFRETEFKFNPAGAR FOREIGN KEY (CODPAG, CODFILIALPA, CODEMPPA) REFERENCES FNPAGAR (CODPAG, CODFILIAL, CODEMP);
ALTER TABLE LFFRETE ADD CONSTRAINT LFFRETEFKLFNATOP FOREIGN KEY (CODNAT, CODFILIALNT, CODEMPNT) REFERENCES LFNATOPER (CODNAT, CODFILIAL, CODEMP);
ALTER TABLE LFFRETE ADD CONSTRAINT LFFRETEFKSGUNIFCODD FOREIGN KEY (CODDESTINAT, CODFILIALDE, CODEMPDE) REFERENCES SGUNIFCOD (CODUNIFCOD, CODFILIAL, CODEMP);
ALTER TABLE LFFRETE ADD CONSTRAINT LFFRETEFKSGUNIFCODR FOREIGN KEY (CODREMET, CODFILIALRE, CODEMPRE) REFERENCES SGUNIFCOD (CODUNIFCOD, CODFILIAL, CODEMP);
ALTER TABLE LFFRETE ADD CONSTRAINT LFFRETEFKTRATTRIB FOREIGN KEY (CODTRATTRIB, CODFILIALTT, CODEMPTT) REFERENCES LFTRATTRIB (CODTRATTRIB, CODFILIAL, CODEMP);
ALTER TABLE LFFRETE ADD CONSTRAINT LFFRETEFKVDTRANS FOREIGN KEY (CODTRAN, CODFILIALTN, CODEMPTN) REFERENCES VDTRANSP (CODTRAN, CODFILIAL, CODEMP);

